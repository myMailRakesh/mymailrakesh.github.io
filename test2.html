<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Schema Fallback Test2</title>
</head>

<body>
    <script>
function openAppOrRedirect() {
  // Detect Device and Platform
  const userAgent = navigator.userAgent || navigator.vendor || window.opera;
  const isIOS = /iPhone|iPad|iPod/.test(userAgent) && !window.MSStream; 
  const isAndroid = /android/i.test(userAgent);

  // Define URLs
  const appSchemaUrl = {
    ios: "northernrail://com.trainline.development.nr/deeplink/order",
    android: "northernrail://org.northernrail/deeplink/order",
  };
  const marketingUrl = "https://www.northernrailway.co.uk/app";
  const storeUrl = {
    ios: "https://apps.apple.com/gb/app/northern-train-tickets-times/id576380036",
    android: "https://play.google.com/store/apps/details?id=org.northernrail.android&hl=en_IN&pli=1",
  };

  // Attempt to Open App
  window.location.href = isIOS ? appSchemaUrl.ios : appSchemaUrl.android;

  // Fallback to Marketing Site (if app not installed)
  const fallbackToMarketing = setTimeout(() => {
    window.location.href = marketingUrl;
  }, 1000); // Adjust timeout as needed

  // const fallbackToStore = setTimeout(() => {
  //   clearTimeout(fallbackToMarketing); // Cancel marketing redirect
  //   window.location.href = isIOS ? storeUrl.ios : storeUrl.android;
  // }, 1000); 

  
  // document.addEventListener("visibilitychange", () => {
  //   if (document.visibilityState === "hidden") {
  //     clearTimeout(fallbackToMarketing);
  //     clearTimeout(fallbackToStore);
  //   }
  });
}

openAppOrRedirect(); // Call the function immediately


    </script>
</body>

</html>
